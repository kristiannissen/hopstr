---
/* @index.astro */

/*
 TODO:
 - Latest brew
 - Popular hops
 - Popular style
*/

import { Debug } from "astro:components";
import Skeleton from "../layouts/Skeleton.astro";
import PubTime from "../components/PubTime.astro";
import BrewCard from "../components/BrewCard.astro";
let brews = (await Astro.glob("../content/brews/*.mdx")) || [];
// Brew count
let countBrews = brews.length;
brews.sort(
  (a, b) =>
    Date.parse(b.frontmatter.published) - Date.parse(a.frontmatter.published),
);

let topBrew = brews[0];
brews = brews.slice(1);
---

<Skeleton title="Det jeg brygger">
  <section>
    <div
      class="bg-[url('/assets/images/beer_glasses.jpg')] grid min-h-64 place-content-center"
    >
      <article class="bg-[#364037] p-6 font-serif text-white">
        <BrewCard brew={topBrew} image={false} />
      </article>
    </div>
  </section>
  <section>
    <div
      class="grid grid-cols-3 gap-4 place-content-center bg-amber-950 text-white min-h-24 p-4 text-xl text-center"
    >
      <div><span class="font-serif block font-extrabold">+200</span> bryg</div>
      <div><span class="font-serif block">333</span>Humler</div>
      <div><span class="font-serif block">333</span>Ã˜ltyper</div>
    </div>
  </section>
  <section class="p-4">
    <div class="grid md:grid-cols-2 gap-4">
      {
        brews.map((brew) => (
          <div class="">
            <BrewCard brew={brew} image={true} />
          </div>
        ))
      }
    </div>
  </section>
</Skeleton>
